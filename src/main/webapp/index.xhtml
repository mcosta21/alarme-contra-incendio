<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui">
    <h:head>
    <meta charset="UTF-8" />
	<title>Alarme contra incêndio</title>
	
    <link type="text/css" 
		  rel="stylesheet" 
		  href="#{facesContext.externalContext.requestContextPath}/resources/css/index.css" />
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@300;400;700" rel="stylesheet"/>
    
    </h:head>
    <h:body>
   	
   		<h:form id="panel">
   		
   			<p:poll interval="3" listener="#{alarmeBean.getValuesFromSerial()}" update="@form" />
        	<header>
        		<img src="#{facesContext.externalContext.requestContextPath}/resources/images/fire.png"/>
        		<h:outputText class="title" value="ALARME CONTRA INCÊNDIO" />
        	</header>
        	<main>
        		<p:clock class="timer" pattern="dd/MM/yyyy HH:mm:ss" />
        	</main>
        	
        	<section id="dataSensors">
	        	<p:repeat value="#{alarmeBean.sensors}" var="sensor">
			         <div>
	        			<h:outputText class="title-value" value="#{alarmeBean.convertSensorToName(sensor.sensorName)}" />
	        			<h:outputText class="subtitle-value" value="#{alarmeBean.getValueReferenceWithUnitMeasurement(sensor.sensorName, sensor.valueReference)}" />
	        			<h:outputText class="subtitle-status" value="#{sensor.valuePercentage}" />
	        		</div>
			    </p:repeat>        		
        	</section>
        	
        	<p:dialog  widgetVar="dialogAlert" modal="true" height="500" width="100vw">
        		<div id="panel-alert">
        			<h:outputText value="#{alarmeBean.phraseAlert}" />
        		</div>
			    
			</p:dialog>
			
   		</h:form>
    	
    </h:body>
</html>